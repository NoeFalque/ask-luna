"use strict";window.addEventListener("DOMContentLoaded",function(){setTimeout(function(){document.querySelector(".loader").classList.remove("loader-expanded"),document.querySelector(".loader").classList.add("loader-shrinked"),setTimeout(function(){document.querySelector(".loader").classList.remove("loader-shrinked")},400)},500)});var toggle_notifications=document.querySelector(".toggle-notifications");toggle_notifications&&toggle_notifications.addEventListener("click",function(e){e.preventDefault();var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState&&200==this.status){if("ok"==this.responseText){document.querySelectorAll(".dropdown-notifications a.dropdown-item").forEach(function(e){e.parentNode.removeChild(e)}),document.querySelector(".dropdown-notifications").innerHTML='\n                        <div class="dropdown-item">\n                            No new notifications\n                        </div>\n                    ',document.querySelector(".notifications-count")&&(document.querySelector(".notifications-count").innerHTML="")}else alert("A problem occured, please try again.")}},t.open("GET","/api/notifications",!0),t.send()});var dropdown_toggle=document.querySelectorAll(".dropdown-toggle");dropdown_toggle&&dropdown_toggle.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault(),e.classList.toggle("dropdown-toggle-active")})});var nav_toggle=[document.querySelector(".header-nav-toggle"),document.querySelector(".header-nav-close")];nav_toggle&&nav_toggle.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),document.querySelector(".header-nav").classList.toggle("header-nav-active")})}),document.querySelectorAll(".date-formatted").forEach(function(e){var t=e.innerHTML;e.innerHTML=moment(t).format("MMMM Do YYYY")}),document.querySelectorAll(".date-from").forEach(function(e){var t=e.innerHTML;e.innerHTML=moment(t).fromNow()}),document.querySelector(".header-search").addEventListener("click",function(e){e.preventDefault(),document.querySelector(".search").classList.add("search-active"),document.querySelector("body").classList.add("body-blocked")}),document.querySelector(".search-close").addEventListener("click",function(e){e.preventDefault(),document.querySelector(".search").classList.remove("search-active"),document.querySelector("body").classList.remove("body-blocked")});var search_input=document.querySelector(".search-input-input");search_input.addEventListener("keyup",function(){var e=search_input.value,t=document.querySelector(".search-results");if(t.innerHTML="",""!=e){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);if(0==e.results.length)t.innerHTML="<p>Sorry but nothing match your request :(</p>";else if(e.results.length>0){var n=document.createElement("ul");e.results.forEach(function(t){var o=document.createElement("li");o.classList.add("search-item"),o.innerHTML='<a href="'+e.url+"picture-of-the-day/"+t.id+'" class="search-link">'+t.title+"</a>",n.appendChild(o)}),t.appendChild(n)}else t.innerHTML=""}},n.open("GET","/api/search/"+e,!0),n.send()}});